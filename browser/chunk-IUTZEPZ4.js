import{J as o,a as r,b as s,fa as n}from"./chunk-OCS2N2NT.js";var d=class i{storageKey="cart_items";items=n(this.loadCart());loadCart(){if(typeof window>"u")return[];let a=localStorage.getItem(this.storageKey);return a?JSON.parse(a):[]}saveCart(a){typeof window>"u"||localStorage.setItem(this.storageKey,JSON.stringify(a))}addToCart(a){let t=[...this.items()],e=t.findIndex(u=>u.product.id===a.id);e>-1?t[e].quantity+=1:t.push({product:a,quantity:1}),this.items.set(t),this.saveCart(t)}increaseQuantity(a){let t=this.items().map(e=>e.product.id===a?s(r({},e),{quantity:e.quantity+1}):e);this.items.set(t),this.saveCart(t)}decreaseQuantity(a){let t=this.items().map(e=>e.product.id===a?s(r({},e),{quantity:e.quantity-1}):e).filter(e=>e.quantity>0);this.items.set(t),this.saveCart(t)}removeFromCart(a){let t=this.items().filter(e=>e.product.id!==a);this.items.set(t),this.saveCart(t)}clearCart(){this.items.set([]),localStorage.removeItem(this.storageKey)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
